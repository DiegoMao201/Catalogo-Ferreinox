<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cat√°logo de Productos - Ferreinox</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
</head>
<body>
    <header class="text-center py-12 relative">
        <div class="floating-icon absolute top-4 left-8 text-4xl">üé®</div>
        <div class="floating-icon absolute top-8 right-12 text-3xl" style="animation-delay: -1s;">üè†</div>
        <div class="floating-icon absolute top-16 left-1/4 text-2xl" style="animation-delay: -2s;">‚ú®</div>
        
        <h1 class="text-white text-5xl md:text-6xl font-bold mb-4">
            Cat√°logo de Productos
        </h1>
        <p class="text-white text-xl md:text-2xl font-light opacity-90">
            Ferreinox - Soluciones en Pintura y Abrasivos
        </p>
        <div class="mt-6 w-32 h-1 bg-white mx-auto rounded-full opacity-60"></div>
    </header>

    <div class="sticky top-0 z-50 bg-gradient-to-r from-purple-700 via-indigo-800 to-purple-900 shadow-lg">
        <div class="max-w-7xl mx-auto px-4">
            <nav class="flex items-center justify-between h-16">
                <div class="flex">
                    <button class="text-white px-3 py-2 rounded-md text-sm font-medium hover:bg-purple-600 active" 
                            onclick="filterProducts('todos')">
                        Todos los Productos
                    </button>
                </div>
                <div class="hidden md:flex space-x-4">
                    <button class="text-white px-3 py-2 rounded-md text-sm font-medium hover:bg-purple-600" 
                            onclick="filterProducts('pinturas')">
                        <i class="fas fa-paint-roller mr-1"></i> Pinturas
                    </button>
                    <button class="text-white px-3 py-2 rounded-md text-sm font-medium hover:bg-purple-600" 
                            onclick="filterProducts('Abrasivos')">
                        <i class="fas fa-file-alt mr-1"></i> Abrasivos
                    </button>
                    <button class="text-white px-3 py-2 rounded-md text-sm font-medium hover:bg-purple-600" 
                            onclick="filterProducts('herramientas')">
                        <i class="fas fa-tools mr-1"></i> Herramientas
                    </button>
                    <button class="text-white px-3 py-2 rounded-md text-sm font-medium hover:bg-purple-600" 
                            onclick="filterProducts('accesorios')">
                        <i class="fas fa-brush mr-1"></i> Accesorios
                    </button>
                </div>
                <div class="md:hidden">
                    <button class="text-white" onclick="toggleMobileMenu()">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                </div>
            </nav>
            <div id="mobileMenu" class="hidden pb-3">
                <div class="flex flex-col space-y-2">
                    <button class="text-white px-3 py-2 rounded-md text-sm font-medium hover:bg-purple-600" 
                            onclick="filterProducts('pinturas')">
                        <i class="fas fa-paint-roller mr-1"></i> Pinturas
                    </button>
                    <button class="text-white px-3 py-2 rounded-md text-sm font-medium hover:bg-purple-600" 
                            onclick="filterProducts('Abrasivos')">
                        <i class="fas fa-file-alt mr-1"></i> Abrasivos
                    </button>
                    <button class="text-white px-3 py-2 rounded-md text-sm font-medium hover:bg-purple-600" 
                            onclick="filterProducts('herramientas')">
                        <i class="fas fa-tools mr-1"></i> Herramientas
                    </button>
                    <button class="text-white px-3 py-2 rounded-md text-sm font-medium hover:bg-purple-600" 
                            onclick="filterProducts('accesorios')">
                        <i class="fas fa-brush mr-1"></i> Accesorios
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div class="max-w-7xl mx-auto px-4 py-6 pb-12">
        <div id="productsContainer" class="mb-16">
            <div class="text-white text-center py-10">
                <i class="fas fa-spinner fa-spin text-4xl"></i>
                <p class="mt-4">Cargando productos...</p>
            </div>
        </div>
        
        <div class="text-center py-8 border-t border-white border-opacity-20">
            <h3 class="text-white text-2xl font-bold mb-4">Ferreinox</h3>
            <p class="text-white opacity-80 mb-4">Tu socio confiable en soluciones de pintura y abrasivos</p>
            <div class="flex justify-center space-x-6 text-white opacity-60">
                <span>üìû Contacto</span>
                <span>üìß Ventas</span>
                <span>üöö Entregas</span>
            </div>
        </div>
    </div>

    <script>
        // Variable global para almacenar todos los productos
        let allProducts = [];
        let currentCategory = 'todos';

        // Funci√≥n para cargar el archivo CSV
        function loadProductData() {
            // Ruta al archivo CSV
            const csvFilePath = 'datos_productos.csv';
            
            fetch(csvFilePath)
                .then(response => {
                    if (!response.ok) {
                        throw new Error("No se pudo encontrar el archivo: " + response.statusText);
                    }
                    return response.text();
                })
                .then(csvData => {
                    // Parseamos el CSV
                    const results = Papa.parse(csvData, {
                        header: true,
                        skipEmptyLines: true
                    });
                    
                    // Almacenar todos los productos
                    allProducts = results.data;
                    
                    // Mostrar informaci√≥n de depuraci√≥n en la consola
                    console.log("Productos cargados:", allProducts);
                    console.log("N√∫mero total de productos:", allProducts.length);
                    
                    // Mostrar todos los productos inicialmente
                    displayProducts(allProducts);
                })
                .catch(error => {
                    console.error('Error al cargar los datos:', error);
                    document.getElementById('productsContainer').innerHTML = `
                        <div class="text-white text-center py-10">
                            <i class="fas fa-exclamation-triangle text-4xl"></i>
                            <p class="mt-4">Error al cargar los productos. Aseg√∫rate de que el archivo 'datos_productos.csv' exista.</p>
                        </div>
                    `;
                });
        }
        
        // Funci√≥n para mostrar productos filtrados
        function displayProducts(products) {
            const container = document.getElementById('productsContainer');
            
            // Si no hay productos para mostrar
            if (products.length === 0) {
                container.innerHTML = `
                    <div class="text-white text-center py-10">
                        <i class="fas fa-search text-4xl"></i>
                        <p class="mt-4">No se encontraron productos en esta categor√≠a.</p>
                    </div>
                `;
                return;
            }
            
            // Agrupar productos por subcategor√≠a
            const productsBySubcategory = {};
            
            products.forEach(product => {
                const subcat = product.subcategoria || 'otros';
                if (!productsBySubcategory[subcat]) {
                    productsBySubcategory[subcat] = [];
                }
                productsBySubcategory[subcat].push(product);
            });
            
            // Construir el HTML para cada subcategor√≠a
            let html = '';
            
            Object.keys(productsBySubcategory).sort().forEach(subcategory => {
                const subcategoryProducts = productsBySubcategory[subcategory];
                
                // T√≠tulo de la subcategor√≠a
                html += `
                <div class="mb-16">
                    <div class="text-center mb-8">
                        <h2 class="text-white text-4xl font-bold mb-4 flex items-center justify-center">
                            <span class="text-${getCategoryColor(subcategory)}-400 mr-4">${getCategoryIcon(subcategory)}</span>
                            ${subcategory.toUpperCase()}
                        </h2>
                        <p class="text-white text-lg opacity-80">${getCategoryDescription(subcategory)}</p>
                    </div>
                    
                    <div class="space-y-10">
                `;
                
                // Productos de esta subcategor√≠a
                subcategoryProducts.forEach(product => {
                    // Separamos las caracter√≠sticas en un array
                    const caracteristicas = product.caracteristicas ? product.caracteristicas.split(',') : [];
                    
                    html += `
                    <div class="bg-white rounded-xl overflow-hidden shadow-xl mb-10 transform transition-all hover:scale-[1.01]">
                        <div class="p-6 flex flex-col md:flex-row">
                            <div class="md:w-1/3 mb-6 md:mb-0 flex flex-col items-center">
                                <div class="category-tag ${subcategory.replace(/\s+/g, '-')}-bg text-white text-sm font-bold uppercase rounded-full px-4 py-1 mb-4">
                                    ${getProductLevel(product.nombre)}
                                </div>
                                <div class="h-64 w-64 flex items-center justify-center">
                                    <img src="images/productos/${product.subcategoria}/${product.imagen}" 
                                         alt="${product.nombre}" 
                                         class="w-auto max-h-64 object-contain product-shadow"
                                         onerror="this.src='https://via.placeholder.com/300x300?text=Imagen+No+Disponible'">
                                </div>
                                <div class="rating mt-4 text-amber-400 flex">
                                    ${getRatingStars(product.nombre)}
                                </div>
                            </div>
                            
                            <div class="md:w-2/3 md:pl-8">
                                <h3 class="text-2xl font-bold text-gray-800 mb-4">${product.nombre}</h3>
                                <p class="text-gray-600 mb-6">${product.descripcion}</p>
                                
                                <div class="overflow-x-auto">
                                    <table class="min-w-full bg-white border border-gray-200">
                                        <thead>
                                            <tr class="bg-gray-100">
                                                <th class="py-2 px-4 border-b border-r">C√ìDIGO</th>
                                                <th class="py-2 px-4 border-b border-r">PRESENTACI√ìN</th>
                                                <th class="py-2 px-4 border-b border-r">RENDIMIENTO</th>
                                                <th class="py-2 px-4 border-b">ACABADO</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr class="hover:bg-gray-50 text-center">
                                                <td class="py-2 px-4 border-b border-r">${product.codigo || 'N/A'}</td>
                                                <td class="py-2 px-4 border-b border-r">${product.presentacion || 'N/A'}</td>
                                                <td class="py-2 px-4 border-b border-r">${product.rendimiento || 'N/A'}</td>
                                                <td class="py-2 px-4 border-b">${product.acabado || 'N/A'}</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                
                                <div class="flex flex-wrap gap-2 mt-6">
                                    ${caracteristicas.map((caracteristica, index) => {
                                        const colors = ['red', 'orange', 'green', 'blue', 'purple', 'teal'];
                                        const color = colors[index % colors.length];
                                        return `<span class="bg-${color}-100 text-${color}-800 px-3 py-1 rounded-full text-sm font-medium">${caracteristica.trim()}</span>`;
                                    }).join('')}
                                </div>
                            </div>
                        </div>
                    </div>
                    `;
                });
                
                html += `
                    </div>
                </div>
                
                <div class="h-0.5 bg-gradient-to-r from-transparent via-white to-transparent my-12 opacity-30"></div>
                `;
            });
            
            container.innerHTML = html;
        }

        // Funci√≥n para filtrar productos por categor√≠a
        function filterProducts(category) {
            currentCategory = category;
            
            // Actualizar clases del men√∫ para mostrar qu√© est√° activo
            document.querySelectorAll('nav button, #mobileMenu button').forEach(button => {
                button.classList.remove('active');
                if (button.getAttribute('onclick') === `filterProducts('${category}')`) {
                    button.classList.add('active');
                }
            });
            
            // Si queremos mostrar todos los productos
            if (category === 'todos') {
                displayProducts(allProducts);
                return;
            }
            
            // Filtrar por categor√≠a
            const filteredProducts = allProducts.filter(product => product.categoria === category);
            displayProducts(filteredProducts);
        }

        // Funci√≥n para mostrar/ocultar el men√∫ m√≥vil
        function toggleMobileMenu() {
            const mobileMenu = document.getElementById('mobileMenu');
            mobileMenu.classList.toggle('hidden');
        }

        // --- FUNCIONES AUXILIARES ACTUALIZADAS ---
        function getCategoryColor(subcategory) {
             // Mapeo simple para asignar colores. Puedes expandirlo.
            const colors = { 'default': 'blue' };
            return colors[subcategory] || colors.default;
        }

        function getCategoryIcon(subcategory) {
            const icons = {
                'viniltex': 'üé®', 'koraza': 'üõ°Ô∏è', 'pintulux': 'üíé',
                'herramientas': 'üîß', 'accesorios': 'üß∞',
                'Lija de Agua': 'üíß', 'Lija Omega': 'üî©', 'Lija Roja': 'üü•',
                'Disco Velcro': 'üîó', 'Tela Esmeril': 'üìú', 'Disco de Corte': '‚öôÔ∏è',
                'Disco de Pulir': '‚ú®', 'Disco Flap': 'üíø', 'Disco Flap Ceramico': 'üî•',
                'Fibro Disco': 'üìÄ', 'Cono': 'üç¶', 'Copa': 'üèÜ',
                'Afilador': 'üî™', 'Bloque Afilador': 'üß±', 'Disco Segmentado': 'üçï',
                'Disco Turbo': 'üåÄ', 'Disco Continuo': 'üîÑ', 'Cinta Antideslizante': 'üö∂‚Äç‚ôÇÔ∏è',
                'Cinta de Enmascarar': 'üé≠', 'Cinta de Empaque': 'üì¶',
                'default': '‚≠ê'
            };
            return icons[subcategory] || icons.default;
        }

        function getCategoryDescription(subcategory) {
            const descriptions = {
                'viniltex': 'Pintura vin√≠lica de alta calidad para interiores.',
                'koraza': 'Pintura anticorrosiva de m√°xima protecci√≥n.',
                'Lija de Agua': 'Abrasivos impermeables para acabados perfectos y pulido en h√∫medo.',
                'Lija Omega': 'Lijas de grano fino para pulido r√°pido y eficiente en el hogar.',
                'Lija Roja': 'Lijas de alto desempe√±o para uso profesional en h√∫medo y seco.',
                'Disco Velcro': 'Discos para la remoci√≥n de pintura, lacas y barnices.',
                'Tela Esmeril': 'Telas abrasivas para acabados en madera y operaciones industriales.',
                'Disco de Corte': 'Discos para corte de metales en el sector metalmec√°nico.',
                'Disco de Pulir': 'Discos para desbaste y pulido en √°ngulos espec√≠ficos.',
                'Disco Flap': 'Combina desbaste y pulido, ideal para soldaduras y aceros.',
                'Disco Flap Ceramico': 'Discos de alta remoci√≥n para materiales endurecidos y aceros.',
                'Fibro Disco': 'Discos vers√°tiles para desbaste, lijado y acabado de superficies.',
                'Cono': 'Abrasivos para pulido en zonas de dif√≠cil acceso en construcci√≥n.',
                'Copa': 'Copas para destronque y pulido de m√°rmol, granito y terrazo.',
                'Afilador': 'Herramientas para el afilado de cuchillas, machetes y hachas.',
                'Bloque Afilador': 'Bloques para afilado manual de cuchillos y herramientas agr√≠colas.',
                'Disco Segmentado': 'Discos para corte de materiales duros como concreto y asfalto.',
                'Disco Turbo': 'Discos para corte de tejas, ladrillos, bloques y hormig√≥n.',
                'Disco Continuo': 'Discos para cortes finos en materiales delicados como porcelana y vidrio.',
                'Cinta Antideslizante': 'Cintas de seguridad para prevenir ca√≠das y resbalones.',
                'Cinta de Enmascarar': 'Cintas de papel para protecci√≥n en trabajos de pintura.',
                'Cinta de Empaque': 'Cintas adhesivas para sellado de cajas y paquetes.',
                'default': 'Productos de calidad para tus proyectos.'
            };
            return descriptions[subcategory] || descriptions.default;
        }

        function getProductLevel(productName) {
            if (productName.includes('Advanced') || productName.includes('Premium') || productName.includes('Ceramico')) {
                return 'PREMIUM';
            } else if (productName.includes('Pro') || productName.includes('ABRACOL') || productName.includes('Omega')) {
                return 'PROFESIONAL';
            } else if (productName.includes('Industrial')) {
                return 'INDUSTRIAL';
            }
            return 'EST√ÅNDAR';
        }

        function getRatingStars(productName) {
            let stars = '';
            let rating = 3; // Calificaci√≥n base
            
            if (productName.includes('Advanced') || productName.includes('Premium') || productName.includes('Ceramico') || productName.includes('ABRACOL')) {
                rating = 5;
            } else if (productName.includes('Pro') || productName.includes('Omega')) {
                rating = 4;
            }
            
            for (let i = 1; i <= 5; i++) {
                if (i <= rating) {
                    stars += '<i class="fas fa-star"></i>';
                } else {
                    stars += '<i class="far fa-star text-gray-300"></i>';
                }
            }
            
            return stars;
        }

        // Cargar datos al iniciar la p√°gina
        document.addEventListener('DOMContentLoaded', function() {
            loadProductData();
        });
    </script>
</body>
</html>
